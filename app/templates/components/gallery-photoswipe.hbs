
{{#unless hasBlock}}

  {{#each albumInfo.items as |item index|}}

    {{#if (is-equal item.info.type 'album')}}

      {{#gallery-image-wrap item=item buttonLabel='album'}}
        {{#link-to 'album/detail' albumInfo.site (g-short-album-id item.info.id true)}}
          <img
            id={{item.info.id}}
            src={{item.msrc}}
            alt={{item.title}}
            class='gallery-image-wrap-img'
            onload='if(this.height>320)this.height=320'
          />
        {{/link-to}}
      {{/gallery-image-wrap}}

    {{else if (is-equal item.info.type 'sharedalbum')}}

      {{#gallery-image-wrap item=item buttonLabel='album'}}
        {{#link-to 'share/detail' albumInfo.site item.info.additional.public_share.shareid}}
          <img
            id={{item.info.id}}
            src={{item.msrc}}
            alt={{item.title}}
            class='gallery-image-wrap-img'
            onload='if(this.height>320)this.height=320'
          />
        {{/link-to}}
      {{/gallery-image-wrap}}

    {{else}}

      {{gallery-image-wrap imgId=item.info.id item=item imageClick=(action 'lightbox') detailClick=(action 'popup')}}

    {{/if}}

  {{/each}}

{{/unless}}

{{yield (action 'lightbox') photoswipe popup}}

{{#photo-swipe
  items=albumInfo.items
  history=false
  showHideOpacity=showHideOpacity
  bgOpacity=bgOpacity
  itemProperties=itemProperties
  barsSize=barsSize
  timeToIdle=timeToIdle
  additionalButtons=additionalButtons
  getThumbBoundsFn=(action 'getThumbBoundsFn')
  onInitialZoomIn=(action 'onPhotoSwipeOpen')
  onInitialZoomOut=(action 'onPhotoSwipeClose')
  onAfterChange=(action 'onPhotoSwipeChange')
  as |photoswipe|}}

  {{set-property this 'photoswipe' photoswipe}}

{{/photo-swipe}}

{{#gallery-image-info-popup albumInfo=albumInfo as |popup|}}
  {{set-property this 'popup' popup}}
{{/gallery-image-info-popup}}

<div class='gallery-clear' />

